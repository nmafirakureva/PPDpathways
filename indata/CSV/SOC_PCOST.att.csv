levelName,p,cost,notx,attend,tptend,check
Standard of care pathway                                                                                            ,1,0,1,0,0,0
 °--New people in PPDs                                                                                              ,1,0,1,0,0,0
     °--TB screening                                                                                                ,soc.prop.tb.sympt.screen,cost.tb.sympt.screen + cost.overheads,1,0,0,0
         ¦--Previous TB diagnosis                                                                                   ,soc.prop.prev.tb.dx,0,1,0,0,0
         ¦   ¦--Started TB treatment                                                                                ,soc.prop.prev.tb.dx.started.att,0,1,0,0,0
         ¦   ¦   ¦--Still on treatment for TB                                                                       ,soc.prop.prev.tb.dx.still.on.att,0,1,0,0,0
         ¦   ¦   ¦   °--Refer to TB services                                                                        ,1,pIsolation*cost.prison.cell.isolation,1,0,0,0
         ¦   ¦   ¦       °--Attended                                                                                ,soc.prop.prev.tb.dx.on.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦   ¦           °--continue ATT                                                                        ,soc.prop.prev.tb.dx.continue.att,0,1,0,0,0
         ¦   ¦   ¦               ¦--completed ATT                                                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦   ¦               °--did not complete ATT                                                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦   °--Not on treatment for TB                                                                         ,1-soc.prop.prev.tb.dx.still.on.att,0,1,0,0,0
         ¦   ¦       ¦--TB symptoms                                                                                 ,soc.prop.prev.tb.tx.symp,0,1,0,0,0
         ¦   ¦       ¦   °--Prison GP assessment                                                                    ,soc.prop.prev.tb.tx.symp.gp.assess,pIsolation*cost.prison.cell.isolation + cost.prison.gp.assess + soc.prop.xray*cost.chest.xray,1,0,0,0
         ¦   ¦       ¦       ¦--Clinical suspicion of TB                                                            ,soc.prop.prev.tb.tx.symp.tb.suspicion,pIsolation*cost.prison.cell.isolation,1,0,0,0
         ¦   ¦       ¦       ¦   °--Urgent referral to local NHS TB service                                         ,1,0,1,0,0,0
         ¦   ¦       ¦       ¦       °--Attended                                                                    ,soc.prop.prev.tb.tx.symp.nhs.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦       ¦           ¦--TB                                                                      ,soc.prop.prev.tb.tx.symp.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦       ¦           ¦   °--TB outcomes                                                         ,1,0,1,0,0,0
         ¦   ¦       ¦       ¦           ¦       °--ATT                                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦       ¦           ¦           ¦--completed ATT                                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦       ¦           ¦           °--did not complete ATT                                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       ¦       ¦           °--Not TB                                                                  ,1-soc.prop.prev.tb.tx.symp.tb.dx,0,1,0,0,0
         ¦   ¦       ¦       ¦               °--LTBI pathway                                                        ,1,0,1,0,0,0
         ¦   ¦       ¦       ¦                   °--IGRA test                                                       ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦       ¦       ¦                       °--IGRA test +                                                 ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦--Previous chest x-ray                                    ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦   °--Abornomal chest x-ray                               ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦       °--Referred to NHS TB service                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦           °--Attended                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦               °--TB                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦                   °--TB outcomes                         ,1,0,1,0,0,0
         ¦   ¦       ¦       ¦                           ¦                       °--ATT                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦       ¦                           ¦                           ¦--completed ATT               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦       ¦                           ¦                           °--did not complete ATT        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       ¦       ¦                           °--No previous chest x-ray                                 ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦--Chest x-ray                                         ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦   °--Abornomal chest x-ray                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦       °--Referred to NHS TB service                  ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦           °--Attended                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦               °--TB                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦                   °--TB outcomes                     ,1,0,1,0,0,0
         ¦   ¦       ¦       ¦                               ¦                       °--ATT                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦       ¦                               ¦                           ¦--completed ATT           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦       ¦                               ¦                           °--did not complete ATT    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       ¦       ¦                               °--No chest x-ray                                      ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦       ¦       ¦                                   °--Referred to NHS TB service                      ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦       ¦       ¦                                       °--Attended                                    ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦       ¦                                           °--TB                                      ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦       ¦                                               °--TB outcomes                         ,1,0,1,0,0,0
         ¦   ¦       ¦       ¦                                                   °--ATT                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦       ¦                                                       ¦--completed ATT               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦       ¦                                                       °--did not complete ATT        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       ¦       °--No clinical suspicion of TB                                                         ,1-soc.prop.prev.tb.tx.symp.tb.suspicion,0,1,0,0,0
         ¦   ¦       ¦           °--LTBI pathway                                                                    ,1,0,1,0,0,0
         ¦   ¦       ¦               °--IGRA test                                                                   ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦       ¦                   °--IGRA test +                                                             ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦       ¦                       ¦--Previous chest x-ray                                                ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦       ¦                       ¦   °--Abornomal chest x-ray                                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦       ¦                       ¦       °--Referred to NHS TB service                                  ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦       ¦                       ¦           °--Attended                                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦                       ¦               °--TB                                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦                       ¦                   °--TB outcomes                                     ,1,0,1,0,0,0
         ¦   ¦       ¦                       ¦                       °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦                       ¦                           ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦                       ¦                           °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       ¦                       °--No previous chest x-ray                                             ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦       ¦                           ¦--Chest x-ray                                                     ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦       ¦                           ¦   °--Abornomal chest x-ray                                       ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦       ¦                           ¦       °--Referred to NHS TB service                              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦       ¦                           ¦           °--Attended                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦                           ¦               °--TB                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦                           ¦                   °--TB outcomes                                 ,1,0,1,0,0,0
         ¦   ¦       ¦                           ¦                       °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦                           ¦                           ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦                           ¦                           °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       ¦                           °--No chest x-ray                                                  ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦       ¦                               °--Referred to NHS TB service                                  ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦       ¦                                   °--Attended                                                ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦       ¦                                       °--TB                                                  ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦       ¦                                           °--TB outcomes                                     ,1,0,1,0,0,0
         ¦   ¦       ¦                                               °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦       ¦                                                   ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦       ¦                                                   °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦       °--No TB symptoms                                                                              ,1-soc.prop.prev.tb.tx.symp,0,1,0,0,0
         ¦   ¦           ¦--Chest x-ray < 6 months                                                                  ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦--Abornomal chest x-ray                                                               ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦   °--Urgent referral to local NHS TB service                                         ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦       °--Attended                                                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦   ¦           ¦--TB                                                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦   ¦           ¦   °--TB outcomes                                                         ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦           ¦       °--ATT                                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦   ¦           ¦           ¦--completed ATT                                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦   ¦           ¦           °--did not complete ATT                                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           ¦   ¦           °--Not TB                                                                  ,1-soc.prop.abn.xray.tb.dx,0,1,0,0,0
         ¦   ¦           ¦   ¦               °--LTBI pathway                                                        ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦                   °--IGRA test                                                       ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦           ¦   ¦                       °--IGRA test +                                                 ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦--Previous chest x-ray                                    ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦   °--Abornomal chest x-ray                               ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦       °--Referred to NHS TB service                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦           °--Attended                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦               °--TB                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦                   °--TB outcomes                         ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦                           ¦                       °--ATT                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦   ¦                           ¦                           ¦--completed ATT               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦   ¦                           ¦                           °--did not complete ATT        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           ¦   ¦                           °--No previous chest x-ray                                 ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦--Chest x-ray                                         ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦   °--Abornomal chest x-ray                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦       °--Referred to NHS TB service                  ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦           °--Attended                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦               °--TB                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦                   °--TB outcomes                     ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦                               ¦                       °--ATT                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦   ¦                               ¦                           ¦--completed ATT           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦   ¦                               ¦                           °--did not complete ATT    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           ¦   ¦                               °--No chest x-ray                                      ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦           ¦   ¦                                   °--Referred to NHS TB service                      ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦           ¦   ¦                                       °--Attended                                    ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦   ¦                                           °--TB                                      ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦   ¦                                               °--TB outcomes                         ,1,0,1,0,0,0
         ¦   ¦           ¦   ¦                                                   °--ATT                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦   ¦                                                       ¦--completed ATT               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦   ¦                                                       °--did not complete ATT        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           ¦   °--Normal chest x-ray                                                                  ,1-soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦           ¦       °--LTBI pathway                                                                    ,1,0,1,0,0,0
         ¦   ¦           ¦           °--IGRA test                                                                   ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦           ¦               °--IGRA test +                                                             ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦           ¦                   ¦--Previous chest x-ray                                                ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦           ¦                   ¦   °--Abornomal chest x-ray                                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦           ¦                   ¦       °--Referred to NHS TB service                                  ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦           ¦                   ¦           °--Attended                                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦                   ¦               °--TB                                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦                   ¦                   °--TB outcomes                                     ,1,0,1,0,0,0
         ¦   ¦           ¦                   ¦                       °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦                   ¦                           ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦                   ¦                           °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           ¦                   °--No previous chest x-ray                                             ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦           ¦                       ¦--Chest x-ray                                                     ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦           ¦                       ¦   °--Abornomal chest x-ray                                       ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦           ¦                       ¦       °--Referred to NHS TB service                              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦           ¦                       ¦           °--Attended                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦                       ¦               °--TB                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦                       ¦                   °--TB outcomes                                 ,1,0,1,0,0,0
         ¦   ¦           ¦                       ¦                       °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦                       ¦                           ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦                       ¦                           °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           ¦                       °--No chest x-ray                                                  ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦           ¦                           °--Referred to NHS TB service                                  ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦           ¦                               °--Attended                                                ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦           ¦                                   °--TB                                                  ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦           ¦                                       °--TB outcomes                                     ,1,0,1,0,0,0
         ¦   ¦           ¦                                           °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦           ¦                                               ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦           ¦                                               °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦           °--No chest x-ray < 6 months                                                               ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦               ¦--Chest x-ray                                                                         ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦               ¦   ¦--Abornomal chest x-ray                                                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦               ¦   ¦   °--Urgent referral to local NHS TB service                                     ,1,0,1,0,0,0
         ¦   ¦               ¦   ¦       °--Attended                                                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦   ¦           ¦--TB                                                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦   ¦           ¦   °--TB outcomes                                                     ,1,0,1,0,0,0
         ¦   ¦               ¦   ¦           ¦       °--ATT                                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦   ¦           ¦           ¦--completed ATT                                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦   ¦           ¦           °--did not complete ATT                                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               ¦   ¦           °--Not TB                                                              ,1-soc.prop.abn.xray.tb.dx,0,1,0,0,0
         ¦   ¦               ¦   ¦               °--LTBI pathway                                                    ,1,0,1,0,0,0
         ¦   ¦               ¦   ¦                   °--IGRA test                                                   ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦               ¦   ¦                       °--IGRA test +                                             ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦--Previous chest x-ray                                ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦   °--Abornomal chest x-ray                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦       °--Referred to NHS TB service                  ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦           °--Attended                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦               °--TB                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦                   °--TB outcomes                     ,1,0,1,0,0,0
         ¦   ¦               ¦   ¦                           ¦                       °--ATT                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦   ¦                           ¦                           ¦--completed ATT           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦   ¦                           ¦                           °--did not complete ATT    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               ¦   ¦                           °--No previous chest x-ray                             ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦--Chest x-ray                                     ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦   °--Abornomal chest x-ray                       ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦       °--Referred to NHS TB service              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦           °--Attended                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦               °--TB                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦                   °--TB outcomes                 ,1,0,1,0,0,0
         ¦   ¦               ¦   ¦                               ¦                       °--ATT                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦   ¦                               ¦                           ¦--completed ATT       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦   ¦                               ¦                           °--did not complete ATT,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               ¦   ¦                               °--No chest x-ray                                  ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦               ¦   ¦                                   °--Referred to NHS TB service                  ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦               ¦   ¦                                       °--Attended                                ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦   ¦                                           °--TB                                  ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦   ¦                                               °--TB outcomes                     ,1,0,1,0,0,0
         ¦   ¦               ¦   ¦                                                   °--ATT                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦   ¦                                                       ¦--completed ATT           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦   ¦                                                       °--did not complete ATT    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               ¦   °--Normal chest x-ray                                                              ,1-soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦               ¦       °--LTBI pathway                                                                ,1,0,1,0,0,0
         ¦   ¦               ¦           °--IGRA test                                                               ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦               ¦               °--IGRA test +                                                         ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦               ¦                   ¦--Previous chest x-ray                                            ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦               ¦                   ¦   °--Abornomal chest x-ray                                       ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦               ¦                   ¦       °--Referred to NHS TB service                              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦               ¦                   ¦           °--Attended                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦                   ¦               °--TB                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦                   ¦                   °--TB outcomes                                 ,1,0,1,0,0,0
         ¦   ¦               ¦                   ¦                       °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦                   ¦                           ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦                   ¦                           °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               ¦                   °--No previous chest x-ray                                         ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦               ¦                       ¦--Chest x-ray                                                 ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦               ¦                       ¦   °--Abornomal chest x-ray                                   ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦               ¦                       ¦       °--Referred to NHS TB service                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦               ¦                       ¦           °--Attended                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦                       ¦               °--TB                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦                       ¦                   °--TB outcomes                             ,1,0,1,0,0,0
         ¦   ¦               ¦                       ¦                       °--ATT                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦                       ¦                           ¦--completed ATT                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦                       ¦                           °--did not complete ATT            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               ¦                       °--No chest x-ray                                              ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦               ¦                           °--Referred to NHS TB service                              ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦               ¦                               °--Attended                                            ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦               ¦                                   °--TB                                              ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦               ¦                                       °--TB outcomes                                 ,1,0,1,0,0,0
         ¦   ¦               ¦                                           °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦               ¦                                               ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦               ¦                                               °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦               °--No chest x-ray                                                                      ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦                   °--LTBI pathway                                                                    ,1,0,1,0,0,0
         ¦   ¦                       °--IGRA test                                                                   ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
         ¦   ¦                           °--IGRA test +                                                             ,soc.prop.igra.test.positive,0,1,0,0,0
         ¦   ¦                               ¦--Previous chest x-ray                                                ,soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦                               ¦   °--Abornomal chest x-ray                                           ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦                               ¦       °--Referred to NHS TB service                                  ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦                               ¦           °--Attended                                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦                               ¦               °--TB                                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦                               ¦                   °--TB outcomes                                     ,1,0,1,0,0,0
         ¦   ¦                               ¦                       °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦                               ¦                           ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦                               ¦                           °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦                               °--No previous chest x-ray                                             ,1-soc.prop.prev.xray,0,1,0,0,0
         ¦   ¦                                   ¦--Chest x-ray                                                     ,soc.prop.xray,cost.chest.xray,1,0,0,0
         ¦   ¦                                   ¦   °--Abornomal chest x-ray                                       ,soc.prop.abnormal.xray,0,1,0,0,0
         ¦   ¦                                   ¦       °--Referred to NHS TB service                              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
         ¦   ¦                                   ¦           °--Attended                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦                                   ¦               °--TB                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦                                   ¦                   °--TB outcomes                                 ,1,0,1,0,0,0
         ¦   ¦                                   ¦                       °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦                                   ¦                           ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦                                   ¦                           °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   ¦                                   °--No chest x-ray                                                  ,1-soc.prop.xray,0,1,0,0,0
         ¦   ¦                                       °--Referred to NHS TB service                                  ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
         ¦   ¦                                           °--Attended                                                ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
         ¦   ¦                                               °--TB                                                  ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
         ¦   ¦                                                   °--TB outcomes                                     ,1,0,1,0,0,0
         ¦   ¦                                                       °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦   ¦                                                           ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
         ¦   ¦                                                           °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         ¦   °--Did not start TB treatment                                                                          ,1-soc.prop.prev.tb.dx.started.att,0,1,0,0,0
         ¦       °--Refer to TB services                                                                            ,1,pIsolation*cost.prison.cell.isolation,1,0,0,0
         ¦           °--Attended                                                                                    ,soc.prop.prev.tb.dx.notx.referral,cost.nhs.tb.service + cost.prison.escort,1,0,0,0
         ¦               °--ATT                                                                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
         ¦                   °--did not complete ATT                                                                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
         °--No previous TB diagnosis                                                                                ,1-soc.prop.prev.tb.dx,0,1,0,0,0
             ¦--TB symptoms                                                                                         ,soc.prop.no.prev.tb.dx.symp,0,1,0,0,0
             ¦   °--Prison GP assessment                                                                            ,soc.prop.no.prev.tb.dx.symp.gp.assess,pIsolation*cost.prison.cell.isolation + cost.prison.gp.assess + soc.prop.xray*cost.chest.xray,1,0,0,0
             ¦       ¦--Clinical suspicion of TB                                                                    ,soc.prop.no.prev.tb.dx.symp.tb.suspicion,pIsolation*cost.prison.cell.isolation,1,0,0,0
             ¦       ¦   °--Urgent referral to local NHS TB service                                                 ,1,0,1,0,0,0
             ¦       ¦       °--Attended                                                                            ,soc.prop.no.prev.tb.dx.symp.nhs.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦       ¦           ¦--TB                                                                              ,soc.prop.no.prev.tb.dx.symp.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦       ¦           ¦   °--TB outcomes                                                                 ,1,0,1,0,0,0
             ¦       ¦           ¦       °--ATT                                                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦       ¦           ¦           ¦--completed ATT                                                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦       ¦           ¦           °--did not complete ATT                                                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             ¦       ¦           °--Not TB                                                                          ,1-soc.prop.no.prev.tb.dx.symp.tb.dx,0,1,0,0,0
             ¦       ¦               °--LTBI pathway                                                                ,1,0,1,0,0,0
             ¦       ¦                   °--IGRA test                                                               ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
             ¦       ¦                       °--IGRA test +                                                         ,soc.prop.igra.test.positive,0,1,0,0,0
             ¦       ¦                           ¦--Previous chest x-ray                                            ,soc.prop.no.prev.xray,0,1,0,0,0
             ¦       ¦                           ¦   °--Abornomal chest x-ray                                       ,soc.prop.abnormal.xray,0,1,0,0,0
             ¦       ¦                           ¦       °--Referred to NHS TB service                              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
             ¦       ¦                           ¦           °--Attended                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦       ¦                           ¦               °--TB                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦       ¦                           ¦                   °--TB outcomes                                 ,1,0,1,0,0,0
             ¦       ¦                           ¦                       °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦       ¦                           ¦                           ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦       ¦                           ¦                           °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             ¦       ¦                           °--No previous chest x-ray                                         ,1-soc.prop.no.prev.xray,0,1,0,0,0
             ¦       ¦                               ¦--Chest x-ray                                                 ,soc.prop.xray,cost.chest.xray,1,0,0,0
             ¦       ¦                               ¦   °--Abornomal chest x-ray                                   ,soc.prop.abnormal.xray,0,1,0,0,0
             ¦       ¦                               ¦       °--Referred to NHS TB service                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
             ¦       ¦                               ¦           °--Attended                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦       ¦                               ¦               °--TB                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦       ¦                               ¦                   °--TB outcomes                             ,1,0,1,0,0,0
             ¦       ¦                               ¦                       °--ATT                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦       ¦                               ¦                           ¦--completed ATT                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦       ¦                               ¦                           °--did not complete ATT            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             ¦       ¦                               °--No chest x-ray                                              ,1-soc.prop.xray,0,1,0,0,0
             ¦       ¦                                   °--Referred to NHS TB service                              ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
             ¦       ¦                                       °--Attended                                            ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦       ¦                                           °--TB                                              ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦       ¦                                               °--TB outcomes                                 ,1,0,1,0,0,0
             ¦       ¦                                                   °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦       ¦                                                       ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦       ¦                                                       °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             ¦       °--No clinical suspicion of TB                                                                 ,1-soc.prop.no.prev.tb.dx.symp.tb.suspicion,0,1,0,0,0
             ¦           °--LTBI pathway                                                                            ,1,0,1,0,0,0
             ¦               °--IGRA test                                                                           ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
             ¦                   °--IGRA test +                                                                     ,soc.prop.igra.test.positive,0,1,0,0,0
             ¦                       ¦--Previous chest x-ray                                                        ,soc.prop.prev.xray,0,1,0,0,0
             ¦                       ¦   °--Abornomal chest x-ray                                                   ,soc.prop.abnormal.xray,0,1,0,0,0
             ¦                       ¦       °--Referred to NHS TB service                                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
             ¦                       ¦           °--Attended                                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦                       ¦               °--TB                                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦                       ¦                   °--TB outcomes                                             ,1,0,1,0,0,0
             ¦                       ¦                       °--ATT                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦                       ¦                           ¦--completed ATT                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦                       ¦                           °--did not complete ATT                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             ¦                       °--No previous chest x-ray                                                     ,1-soc.prop.prev.xray,0,1,0,0,0
             ¦                           ¦--Chest x-ray                                                             ,soc.prop.xray,cost.chest.xray,1,0,0,0
             ¦                           ¦   °--Abornomal chest x-ray                                               ,soc.prop.abnormal.xray,0,1,0,0,0
             ¦                           ¦       °--Referred to NHS TB service                                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
             ¦                           ¦           °--Attended                                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦                           ¦               °--TB                                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦                           ¦                   °--TB outcomes                                         ,1,0,1,0,0,0
             ¦                           ¦                       °--ATT                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦                           ¦                           ¦--completed ATT                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦                           ¦                           °--did not complete ATT                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             ¦                           °--No chest x-ray                                                          ,1-soc.prop.xray,0,1,0,0,0
             ¦                               °--Referred to NHS TB service                                          ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
             ¦                                   °--Attended                                                        ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
             ¦                                       °--TB                                                          ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
             ¦                                           °--TB outcomes                                             ,1,0,1,0,0,0
             ¦                                               °--ATT                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
             ¦                                                   ¦--completed ATT                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
             ¦                                                   °--did not complete ATT                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
             °--No TB symptoms                                                                                      ,1-soc.prop.no.prev.tb.dx.symp,0,1,0,0,0
                 ¦--Chest x-ray < 6 months                                                                          ,soc.prop.prev.xray,0,1,0,0,0
                 ¦   ¦--Abornomal chest x-ray                                                                       ,soc.prop.abnormal.xray,0,1,0,0,0
                 ¦   ¦   °--Urgent referral to local NHS TB service                                                 ,1,0,1,0,0,0
                 ¦   ¦       °--Attended                                                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦   ¦           ¦--TB                                                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦   ¦           ¦   °--TB outcomes                                                                 ,1,0,1,0,0,0
                 ¦   ¦           ¦       °--ATT                                                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦   ¦           ¦           ¦--completed ATT                                                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦   ¦           ¦           °--did not complete ATT                                                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 ¦   ¦           °--Not TB                                                                          ,1-soc.prop.abn.xray.tb.dx,0,1,0,0,0
                 ¦   ¦               °--LTBI pathway                                                                ,1,0,1,0,0,0
                 ¦   ¦                   °--IGRA test                                                               ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
                 ¦   ¦                       °--IGRA test +                                                         ,soc.prop.igra.test.positive,0,1,0,0,0
                 ¦   ¦                           ¦--Previous chest x-ray                                            ,soc.prop.prev.xray,0,1,0,0,0
                 ¦   ¦                           ¦   °--Abornomal chest x-ray                                       ,soc.prop.abnormal.xray,0,1,0,0,0
                 ¦   ¦                           ¦       °--Referred to NHS TB service                              ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                 ¦   ¦                           ¦           °--Attended                                            ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦   ¦                           ¦               °--TB                                              ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦   ¦                           ¦                   °--TB outcomes                                 ,1,0,1,0,0,0
                 ¦   ¦                           ¦                       °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦   ¦                           ¦                           ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦   ¦                           ¦                           °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 ¦   ¦                           °--No previous chest x-ray                                         ,1-soc.prop.prev.xray,0,1,0,0,0
                 ¦   ¦                               ¦--Chest x-ray                                                 ,soc.prop.xray,cost.chest.xray,1,0,0,0
                 ¦   ¦                               ¦   °--Abornomal chest x-ray                                   ,soc.prop.abnormal.xray,0,1,0,0,0
                 ¦   ¦                               ¦       °--Referred to NHS TB service                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                 ¦   ¦                               ¦           °--Attended                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦   ¦                               ¦               °--TB                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦   ¦                               ¦                   °--TB outcomes                             ,1,0,1,0,0,0
                 ¦   ¦                               ¦                       °--ATT                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦   ¦                               ¦                           ¦--completed ATT                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦   ¦                               ¦                           °--did not complete ATT            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 ¦   ¦                               °--No chest x-ray                                              ,1-soc.prop.xray,0,1,0,0,0
                 ¦   ¦                                   °--Referred to NHS TB service                              ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
                 ¦   ¦                                       °--Attended                                            ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦   ¦                                           °--TB                                              ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦   ¦                                               °--TB outcomes                                 ,1,0,1,0,0,0
                 ¦   ¦                                                   °--ATT                                     ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦   ¦                                                       ¦--completed ATT                       ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦   ¦                                                       °--did not complete ATT                ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 ¦   °--Normal chest x-ray                                                                          ,1-soc.prop.abnormal.xray,0,1,0,0,0
                 ¦       °--LTBI pathway                                                                            ,1,0,1,0,0,0
                 ¦           °--IGRA test                                                                           ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
                 ¦               °--IGRA test +                                                                     ,soc.prop.igra.test.positive,0,1,0,0,0
                 ¦                   ¦--Previous chest x-ray                                                        ,soc.prop.prev.xray,0,1,0,0,0
                 ¦                   ¦   °--Abornomal chest x-ray                                                   ,soc.prop.abnormal.xray,0,1,0,0,0
                 ¦                   ¦       °--Referred to NHS TB service                                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                 ¦                   ¦           °--Attended                                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦                   ¦               °--TB                                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦                   ¦                   °--TB outcomes                                             ,1,0,1,0,0,0
                 ¦                   ¦                       °--ATT                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦                   ¦                           ¦--completed ATT                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦                   ¦                           °--did not complete ATT                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 ¦                   °--No previous chest x-ray                                                     ,1-soc.prop.prev.xray,0,1,0,0,0
                 ¦                       ¦--Chest x-ray                                                             ,soc.prop.xray,cost.chest.xray,1,0,0,0
                 ¦                       ¦   °--Abornomal chest x-ray                                               ,soc.prop.abnormal.xray,0,1,0,0,0
                 ¦                       ¦       °--Referred to NHS TB service                                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                 ¦                       ¦           °--Attended                                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦                       ¦               °--TB                                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦                       ¦                   °--TB outcomes                                         ,1,0,1,0,0,0
                 ¦                       ¦                       °--ATT                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦                       ¦                           ¦--completed ATT                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦                       ¦                           °--did not complete ATT                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 ¦                       °--No chest x-ray                                                          ,1-soc.prop.xray,0,1,0,0,0
                 ¦                           °--Referred to NHS TB service                                          ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
                 ¦                               °--Attended                                                        ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                 ¦                                   °--TB                                                          ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                 ¦                                       °--TB outcomes                                             ,1,0,1,0,0,0
                 ¦                                           °--ATT                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                 ¦                                               ¦--completed ATT                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                 ¦                                               °--did not complete ATT                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                 °--No chest x-ray < 6 months                                                                       ,1-soc.prop.prev.xray,0,1,0,0,0
                     ¦--Chest x-ray                                                                                 ,soc.prop.xray,cost.chest.xray,1,0,0,0
                     ¦   ¦--Abornomal chest x-ray                                                                   ,soc.prop.abnormal.xray,0,1,0,0,0
                     ¦   ¦   °--Urgent referral to local NHS TB service                                             ,1,0,1,0,0,0
                     ¦   ¦       °--Attended                                                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦   ¦           ¦--TB                                                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦   ¦           ¦   °--TB outcomes                                                             ,1,0,1,0,0,0
                     ¦   ¦           ¦       °--ATT                                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦   ¦           ¦           ¦--completed ATT                                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦   ¦           ¦           °--did not complete ATT                                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     ¦   ¦           °--Not TB                                                                      ,1-soc.prop.abn.xray.tb.dx,0,1,0,0,0
                     ¦   ¦               °--LTBI pathway                                                            ,1,0,1,0,0,0
                     ¦   ¦                   °--IGRA test                                                           ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
                     ¦   ¦                       °--IGRA test +                                                     ,soc.prop.igra.test.positive,0,1,0,0,0
                     ¦   ¦                           ¦--Previous chest x-ray                                        ,soc.prop.prev.xray,0,1,0,0,0
                     ¦   ¦                           ¦   °--Abornomal chest x-ray                                   ,soc.prop.abnormal.xray,0,1,0,0,0
                     ¦   ¦                           ¦       °--Referred to NHS TB service                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                     ¦   ¦                           ¦           °--Attended                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦   ¦                           ¦               °--TB                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦   ¦                           ¦                   °--TB outcomes                             ,1,0,1,0,0,0
                     ¦   ¦                           ¦                       °--ATT                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦   ¦                           ¦                           ¦--completed ATT                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦   ¦                           ¦                           °--did not complete ATT            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     ¦   ¦                           °--No previous chest x-ray                                     ,1-soc.prop.prev.xray,0,1,0,0,0
                     ¦   ¦                               ¦--Chest x-ray                                             ,soc.prop.xray,cost.chest.xray,1,0,0,0
                     ¦   ¦                               ¦   °--Abornomal chest x-ray                               ,soc.prop.abnormal.xray,0,1,0,0,0
                     ¦   ¦                               ¦       °--Referred to NHS TB service                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                     ¦   ¦                               ¦           °--Attended                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦   ¦                               ¦               °--TB                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦   ¦                               ¦                   °--TB outcomes                         ,1,0,1,0,0,0
                     ¦   ¦                               ¦                       °--ATT                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦   ¦                               ¦                           ¦--completed ATT               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦   ¦                               ¦                           °--did not complete ATT        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     ¦   ¦                               °--No chest x-ray                                          ,1-soc.prop.xray,0,1,0,0,0
                     ¦   ¦                                   °--Referred to NHS TB service                          ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
                     ¦   ¦                                       °--Attended                                        ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦   ¦                                           °--TB                                          ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦   ¦                                               °--TB outcomes                             ,1,0,1,0,0,0
                     ¦   ¦                                                   °--ATT                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦   ¦                                                       ¦--completed ATT                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦   ¦                                                       °--did not complete ATT            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     ¦   °--Normal chest x-ray                                                                      ,1-soc.prop.abnormal.xray,0,1,0,0,0
                     ¦       °--LTBI pathway                                                                        ,1,0,1,0,0,0
                     ¦           °--IGRA test                                                                       ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
                     ¦               °--IGRA test +                                                                 ,soc.prop.igra.test.positive,0,1,0,0,0
                     ¦                   ¦--Previous chest x-ray                                                    ,soc.prop.prev.xray,0,1,0,0,0
                     ¦                   ¦   °--Abornomal chest x-ray                                               ,soc.prop.abnormal.xray,0,1,0,0,0
                     ¦                   ¦       °--Referred to NHS TB service                                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                     ¦                   ¦           °--Attended                                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦                   ¦               °--TB                                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦                   ¦                   °--TB outcomes                                         ,1,0,1,0,0,0
                     ¦                   ¦                       °--ATT                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦                   ¦                           ¦--completed ATT                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦                   ¦                           °--did not complete ATT                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     ¦                   °--No previous chest x-ray                                                 ,1-soc.prop.prev.xray,0,1,0,0,0
                     ¦                       ¦--Chest x-ray                                                         ,soc.prop.xray,cost.chest.xray,1,0,0,0
                     ¦                       ¦   °--Abornomal chest x-ray                                           ,soc.prop.abnormal.xray,0,1,0,0,0
                     ¦                       ¦       °--Referred to NHS TB service                                  ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                     ¦                       ¦           °--Attended                                                ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦                       ¦               °--TB                                                  ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦                       ¦                   °--TB outcomes                                     ,1,0,1,0,0,0
                     ¦                       ¦                       °--ATT                                         ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦                       ¦                           ¦--completed ATT                           ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦                       ¦                           °--did not complete ATT                    ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     ¦                       °--No chest x-ray                                                      ,1-soc.prop.xray,0,1,0,0,0
                     ¦                           °--Referred to NHS TB service                                      ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
                     ¦                               °--Attended                                                    ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                     ¦                                   °--TB                                                      ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                     ¦                                       °--TB outcomes                                         ,1,0,1,0,0,0
                     ¦                                           °--ATT                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                     ¦                                               ¦--completed ATT                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                     ¦                                               °--did not complete ATT                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                     °--No chest x-ray                                                                              ,1-soc.prop.xray,0,1,0,0,0
                         °--LTBI pathway                                                                            ,1,0,1,0,0,0
                             °--IGRA test                                                                           ,soc.prop.igra.tested,cost.igra.test,1,0,0,0
                                 °--IGRA test +                                                                     ,soc.prop.igra.test.positive,0,1,0,0,0
                                     ¦--Previous chest x-ray                                                        ,soc.prop.prev.xray,0,1,0,0,0
                                     ¦   °--Abornomal chest x-ray                                                   ,soc.prop.abnormal.xray,0,1,0,0,0
                                     ¦       °--Referred to NHS TB service                                          ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                                     ¦           °--Attended                                                        ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                                     ¦               °--TB                                                          ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                                     ¦                   °--TB outcomes                                             ,1,0,1,0,0,0
                                     ¦                       °--ATT                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                                     ¦                           ¦--completed ATT                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                                     ¦                           °--did not complete ATT                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                                     °--No previous chest x-ray                                                     ,1-soc.prop.prev.xray,0,1,0,0,0
                                         ¦--Chest x-ray                                                             ,soc.prop.xray,cost.chest.xray,1,0,0,0
                                         ¦   °--Abornomal chest x-ray                                               ,soc.prop.abnormal.xray,0,1,0,0,0
                                         ¦       °--Referred to NHS TB service                                      ,soc.prop.abn.xray.nhs.referral,0,1,0,0,0
                                         ¦           °--Attended                                                    ,soc.prop.abn.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                                         ¦               °--TB                                                      ,soc.prop.abn.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                                         ¦                   °--TB outcomes                                         ,1,0,1,0,0,0
                                         ¦                       °--ATT                                             ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                                         ¦                           ¦--completed ATT                               ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                                         ¦                           °--did not complete ATT                        ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
                                         °--No chest x-ray                                                          ,1-soc.prop.xray,0,1,0,0,0
                                             °--Referred to NHS TB service                                          ,soc.prop.no.xray.nhs.referral,0,1,0,0,0
                                                 °--Attended                                                        ,soc.prop.no.xray.nhs.attend.referral,cost.nhs.tb.service + cost.prison.escort + cost.tb.investigations,1,0,0,0
                                                     °--TB                                                          ,soc.prop.no.xray.tb.dx,pIsolation*cost.prison.cell.isolation + cost.contact.tracing,1,0,0,0
                                                         °--TB outcomes                                             ,1,0,1,0,0,0
                                                             °--ATT                                                 ,soc.prop.starting.att,pAttending*(cost.nhs.tb.service + cost.prison.escort),1,0,0,0
                                                                 ¦--completed ATT                                   ,soc.prop.completing.att,(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + (1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visit + cost.prison.escort)) + (pDSTB*DurDSTB*cost.dsatt.drugs + (1-pDSTB)*DurMDRTB*cost.mdratt.drugs) + cost.dots*(pDSTB*DurDSTB + (1-pDSTB)*DurMDRTB),0,1,0,1
                                                                 °--did not complete ATT                            ,1-soc.prop.completing.att,IncompDurDSTB/DurDSTB*(pDSTB*dstb.visits*(cost.dstb.opd.visit + cost.prison.escort) + pDSTB*DurDSTB*(cost.dsatt.drugs + cost.dots))+ IncompDurMDRTB/DurMDRTB*((1-pDSTB)*mdrtb.visits*(cost.mdrtb.opd.visits + cost.prison.escort)  + (1-pDSTB)*DurMDRTB*(cost.mdratt.drugs + cost.dots)),0,1,0,1
